workspace:
  base: /usr/src/project
  path: .

pipeline:
  build:  # Build go app and package source files
    image: node
    commands:
        - npm run start
  image:  # Build image and publish to private registry
    image: plugins/docker
    repo: hub.docker.com/u/drone-node
    registry: hub.docker.com
    secrets: [ docker_name, docker_password ]
    context: ./cicd/
    dockerfile: ./cicd/Dockerfile
    default_tags: true
    
